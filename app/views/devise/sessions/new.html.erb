<!-- app/views/devise/sessions/new.html.erb -->
<div class="container py-5">
  <div class="row justify-content-center">
    <div class="col-md-6 col-lg-5">
      <div class="card shadow-lg border-0 rounded-4 overflow-hidden animate__animated animate__fadeIn" style="animation-delay: 0.1s;">
        <!-- Card Header -->
        <div class="card-header bg-gradient-primary text-white text-center py-4">
          <h2 class="fw-bold mb-2">
            <i class="bi bi-box-arrow-in-right me-2"></i>Log In
          </h2>
          <p class="text-light mb-0 fst-italic">Welcome back! Please log in to your account</p>
        </div>

        <!-- Card Body -->
        <div class="card-body p-5 bg-light">
          <%= form_for(resource, as: resource_name, url: session_path(resource_name), method: :post, data: { turbo: false }, html: { class: "needs-validation", novalidate: true }) do |f| %>
            <!-- Phone or Email Field -->
            <div class="form-group mb-4 animate__animated animate__fadeInUp" style="animation-delay: 0.2s;">
              <%= f.label :login, "Phone Number or Email", class: "form-label fw-semibold text-muted" %>
              <%= f.text_field :login, autofocus: true, class: "form-control form-control-lg shadow-sm border-0", placeholder: "Enter phone or email", required: true %>
              <div class="invalid-feedback">Please enter your phone number or email.</div>
            </div>

            <!-- Password Field -->
            <div class="form-group mb-4 animate__animated animate__fadeInUp" style="animation-delay: 0.3s;">
              <%= f.label :password, "Password", class: "form-label fw-semibold text-muted" %>
              <%= f.password_field :password, autocomplete: "current-password", class: "form-control form-control-lg shadow-sm border-0", placeholder: "Enter password", required: true %>
              <div class="invalid-feedback">Please enter your password.</div>
            </div>

            <!-- Remember Me Checkbox -->
            <% if devise_mapping.rememberable? %>
              <div class="form-check mb-4 animate__animated animate__fadeInUp" style="animation-delay: 0.4s;">
                <%= f.check_box :remember_me, class: "form-check-input shadow-sm" %>
                <%= f.label :remember_me, "Remember Me", class: "form-check-label text-muted" %>
              </div>
            <% end %>

            <!-- Submit Button -->
            <div class="d-grid mb-4 animate__animated animate__fadeInUp" style="animation-delay: 0.5s;">
              <%= f.submit "Log In", class: "btn btn-primary btn-lg shadow-sm fw-semibold" %>
            </div>
          <% end %>

          <!-- Links -->
          <div class="text-center animate__animated animate__fadeInUp" style="animation-delay: 0.6s;">
            <%= render "devise/shared/links" %>
          </div>
        </div>
      </div>
    </div>
  </div>
</div>

<!-- Custom CSS -->
<style>
  .bg-gradient-primary { 
    background: linear-gradient(135deg, #007bff, #00d4ff); 
  }
  .bg-light { 
    background: linear-gradient(135deg, #f8f9fa, #e9ecef); 
  }
  .card { 
    transition: transform 0.3s ease, box-shadow 0.3s ease; 
  }
  .card:hover { 
    transform: translateY(-8px); 
    box-shadow: 0 15px 30px rgba(0, 0, 0, 0.2) !important; 
  }
  .form-control { 
    transition: all 0.3s ease; 
    font-size: 1.1rem; 
    padding: 0.75rem 1.25rem; 
    border-radius: 0.5rem; 
  }
  .form-control:focus { 
    box-shadow: 0 0 0 0.25rem rgba(0, 123, 255, 0.25); 
    border-color: #007bff; 
  }
  .btn { 
    transition: all 0.3s ease; 
    padding: 0.75rem 1.5rem; 
  }
  .btn:hover { 
    transform: translateY(-3px); 
    box-shadow: 0 8px 15px rgba(0, 0, 0, 0.15); 
  }
  .form-check-input { 
    margin-top: 0.3rem; 
  }
  .form-label { 
    font-size: 1.1rem; 
  }
  .invalid-feedback { 
    font-size: 0.9rem; 
  }
</style>

<!-- Include Animate.css -->
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/animate.css/4.1.1/animate.min.css">

<!-- Bootstrap Client-Side Validation Script -->
<script>
  (function () {
    'use strict';
    window.addEventListener('load', function () {
      var forms = document.getElementsByClassName('needs-validation');
      Array.prototype.filter.call(forms, function (form) {
        form.addEventListener('submit', function (event) {
          if (form.checkValidity() === false) {
            event.preventDefault();
            event.stopPropagation();
          }
          form.classList.add('was-validated');
        }, false);
      });
    }, false);
  })();
</script>