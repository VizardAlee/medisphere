<div class="container py-5">
  <!-- Hero Section -->
  <div class="row justify-content-center text-center">
    <div class="col-md-10">
      <h1 class="fw-bold text-primary">Your Health Records, Anytime, Anywhere</h1>
      <p class="lead text-muted">
        MediSphere helps patients access their medical records, hospitals manage patient data, 
        and emergency responders get vital health information when every second counts.
      </p>

      <% if current_user.nil? %>
        <div class="mt-4 d-flex flex-wrap justify-content-center gap-3">
          <%= link_to "User Login", new_session_path(:user), class: "btn btn-outline-primary btn-lg" %>
          <%= link_to "Check Your Records", new_session_path(:patient), class: "btn btn-lg btn-warning text-dark fw-bold px-4" %>
        </div>
        <p class="mt-2 text-muted">
          Not sure if your data is on MediSphere? Enter your phone number and find out.
        </p>
      <% else %>
        <!-- Display Approval Status for Signed-In Users -->
        <div class="mt-4">
          <% if current_user.organization %>
            <p class="text-muted">
              Your organization: <strong><%= current_user.organization.name %></strong><br>
              Status: 
              <% if current_user.organization.approved %>
                <span class="badge bg-success">Approved</span>
              <% else %>
                <span class="badge bg-warning">Pending Approval</span>
                <small class="d-block mt-1">Awaiting super admin approval.</small>
              <% end %>
            </p>
          <% end %>
        </div>
      <% end %>
    </div>
  </div>

  <!-- Feature Sections -->
  <div class="row mt-5">
    <!-- For Patients -->
    <div class="col-md-4">
      <div class="card shadow-sm border-0">
        <div class="card-body text-center">
          <h5 class="card-title text-success fw-bold">For Patients</h5>
          <p class="card-text text-muted">
            Access your medical history, prescriptions, and diagnoses in one place. 
            No more missing records—just log in with your phone number.
          </p>
          <%= link_to "Check Your Records", new_session_path(:patient), class: "btn btn-warning text-dark fw-bold" %>
        </div>
      </div>
    </div>

    <!-- For Hospitals & Pharmacies -->
    <div class="col-md-4">
      <div class="card shadow-sm border-0">
        <div class="card-body text-center">
          <h5 class="card-title text-primary fw-bold">For Hospitals & Pharmacies</h5>
          <p class="card-text text-muted">
            Securely manage patient records, update diagnoses, and provide seamless healthcare services.
          </p>
          <%= link_to "Join MediSphere", new_user_registration_path, class: "btn btn-primary" %>
        </div>
      </div>
    </div>

    <!-- For Emergency Responders -->
    <div class="col-md-4">
      <div class="card shadow-sm border-0">
        <div class="card-body text-center">
          <h5 class="card-title text-danger fw-bold">For Emergency Responders</h5>
          <p class="card-text text-muted">
            Register your division to gain secure access to emergency patient data when needed.
          </p>
          <% if current_user && current_user.organization&.approved %>
            <%= link_to "Create Emergency Respondents", new_emergency_respondent_path, class: "btn btn-danger" %>
          <% elsif current_user %>
            <button class="btn btn-danger disabled" title="Pending organization approval">Create Emergency Respondents</button>
            <small class="d-block mt-2 text-muted">Available once approved by a super admin.</small>
          <% else %>
            <%= link_to "Register Your Division", new_user_registration_path, class: "btn btn-danger" %>
          <% end %>
        </div>
      </div>
    </div>
  </div>

  <!-- Emergency Responders Section (Only if organizations exist) -->
  <%= render "home/emergency_respondents" %>

  <!-- Future Feature Teaser -->
  <div class="row mt-5">
    <div class="col-md-8 offset-md-2 text-center">
      <div class="p-4 bg-light rounded shadow-sm">
        <h4 class="fw-bold text-dark">Coming Soon: Symptom-Based Doctor Matching</h4>
        <p class="text-muted">
          Not sure what’s wrong? Share your symptoms and get connected with doctors who specialize in your condition.
        </p>
        <button class="btn btn-outline-secondary disabled">Stay Tuned</button>
      </div>
    </div>
  </div>
</div>